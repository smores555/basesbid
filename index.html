<!doctype html>
<html><head><meta charset="utf-8"><title>Vacancy Cascade</title></head>
<body>
  <div id="results">loadingâ€¦</div>
  <script>
    const $ = id => document.getElementById(id);
    const key = (b,s)=> String(b).toUpperCase()+'|'+String(s).toUpperCase();
    const asInt = v => (v==null||v==='')?0:(Number(v)||0);
    function parsePref(s){
      const t = String(s || '').trim().toUpperCase();
      if (!t) return null;
      if (t === '0') return { base: null, seat: null, stay: true };
      const parts = t.replace(/\s*[-/]\s*/g, ' ').split(/\s+/).filter(Boolean);
      if (parts.length >= 2) {
        const seat = parts[parts.length - 1];
        const base = parts[parts.length - 2];
        return { base, seat, stay: false };
      }
      return null;
    }
    // stub main to avoid blank file
    document.getElementById('results').textContent = 'Patched parsePref ready.';
  </script>
</body></html>
